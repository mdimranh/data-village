{% load static %}

<div it="add-course-section" class="h-full">
    <h1 class="font-bold text-xl mb-3">
        {% if course %}
            Edit Course
        {% else %}
            Add Course
        {% endif %}
    </h1>
    <form action="" class="mb-4">
        {% csrf_token %}
        <div class="mb-4">
            <label for="title" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Title</label>
            <input type="text" name="title" id="title" {% if course %}value="{{course.title}}"{% endif %} class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="title" required>
        </div>
        <div class="relative">
            <div class="px-4 py-2 bg-slate-600 bg-opacity-50 font-bold absolute top-0 bottom-0 left-0 right-0 w-full justify-center flex items-center">
                <label for="thumbnail" class="px-3 py-1 bg-slate-800 bg-opacity-70 text-white cursor-pointer rounded">Change Thumbnail</label>
            </div>
            <img src="{% if not course %}{% static 'img/thumbnail.jpg' %}{% else %}{{course.thumbnail.url}}{% endif %} " id="thumbnail-preview">
            <input name="thumbnail" type="file" onchange="document.getElementById('thumbnail-preview').src = window.URL.createObjectURL(this.files[0])" class="hidden" id="thumbnail">
        </div>
        <div class="mb-4 mt-4">
            <h3 class="mb-2 text-sm font-medium text-gray-900 dark:text-white">Fee Type</h3>
            <ul class="grid w-full gap-3 md:grid-cols-2">
                <li>
                    <input hx-on:click="htmx.removeClass(htmx.find('#fee-section'), 'hidden');" type="radio" id="paid" name="free" value="false" class="hidden peer" required {% if not course.free %}checked{% endif %}>
                    <label for="paid" class="inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 rounded-lg cursor-pointer dark:hover:text-gray-300 dark:border-gray-700 dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700">                           
                        <div class="block">
                            <div class="w-full">Paid</div>
                        </div>
                    </label>
                </li>
                <li>
                    <input hx-on:click="htmx.addClass(htmx.find('#fee-section'), 'hidden');" type="radio" id="free" name="free" value="true" class="hidden peer" {% if course.free %}checked{% endif %}>
                    <label for="free" class="inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 rounded-lg cursor-pointer dark:hover:text-gray-300 dark:border-gray-700 dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700">
                        <div class="block">
                            <div class="w-full">Free</div>
                        </div>
                    </label>
                </li>
            </ul>
        </div>
        <div id="fee-section" class="{% if course and course.free %}hidden{% endif %}">
            <div class="mb-4">
                <label for="fee" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Fee</label>
                <input type="number" name="fee" id="fee" {% if course and not course.free %}value="{{course.fee}}"{% endif %} class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Fee" required>
            </div>
            <div class="mb-4">
                <label for="discount_amount" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Discount Amount</label>
                <input type="number" name="discount_amount" id="discount_amount" value="{{course.discount_amount}}" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Discount Amount" required>
            </div>
            <div class="mb-4">
                <h3 class="mb-2 text-sm font-medium text-gray-900 dark:text-white">Discount Type</h3>
                <ul class="grid w-full gap-3 md:grid-cols-2">
                    <li>
                        <input type="radio" id="percentage" name="discount_type" value="percentage" class="hidden peer" required {% if course.discount_type == 'percentage' %}checked{% endif %}>
                        <label for="percentage" class="inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 rounded-lg cursor-pointer dark:hover:text-gray-300 dark:border-gray-700 dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700">                           
                            <div class="block">
                                <div class="w-full">Percentage</div>
                            </div>
                        </label>
                    </li>
                    <li>
                        <input type="radio" id="fixed_amount" name="discount_type" value="fixed_amount" class="hidden peer" {% if not course.discount_type == 'percentage' %}checked{% endif %}>
                        <label for="fixed_amount" class="inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 rounded-lg cursor-pointer dark:hover:text-gray-300 dark:border-gray-700 dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700">
                            <div class="block">
                                <div class="w-full">Flat</div>
                            </div>
                        </label>
                    </li>
                </ul>
            </div>
        </div>
        <div class="mb-4">
            <h3 class="mb-2 text-sm font-medium text-gray-900 dark:text-white">Class Location Type</h3>
            <ul class="grid w-full gap-3 md:grid-cols-2">
                <li>
                    <input type="radio" id="physical" name="class_type" value="PhysicalClass" class="hidden peer" required {% if course.class_type == 'PhysicalClass' %}checked{% endif %}>
                    <label for="physical" class="inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 rounded-lg cursor-pointer dark:hover:text-gray-300 dark:border-gray-700 dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700">                           
                        <div class="block">
                            <div class="w-full">Physical</div>
                        </div>
                    </label>
                </li>
                <li>
                    <input type="radio" id="online" name="class_type" value="OnlineClass" class="hidden peer" {% if not course.class_type == 'PhysicalClass' %}checked{% endif %}>
                    <label for="online" class="inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border border-gray-200 rounded-lg cursor-pointer dark:hover:text-gray-300 dark:border-gray-700 dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700">
                        <div class="block">
                            <div class="w-full">Online</div>
                        </div>
                    </label>
                </li>
            </ul>
        </div>
        <h3 class="mb-2 text-sm font-medium text-gray-900 dark:text-white">Class Start Date</h3>
        <div class="mb-4 relative">
            <div class="absolute inset-y-0 start-0 h-full flex items-center ps-3 pointer-events-none">
                <svg class="w-4 h-4 z-30 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"/>
                </svg>
            </div>
            <input value="{{course.start_date}}" name="class_start" id="course-date" type="text" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Select date">
        </div>
        <div class="pt-4 bg-white z-40 relative pb-4">
            <div hx-post="/admin/course/add{% if course %}?id={{course.id}}{% endif %}" hx-target="#course-list-section" hx-indicator="#loader" hx-swap="inneHTML" hx-encoding="multipart/form-data" class="w-full px-3 py-1.5 bg-blue-700 text-white text-center rounded cursor-pointer">{% if course %}Update{% else %}Add Course{% endif %}</div>
        </div>
    </form>
</div>